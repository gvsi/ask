tinymce.PluginManager.requireLangPack("sh4tinymce"),tinymce.PluginManager.add("sh4tinymce",function(e,t){function a(){function t(e){for(var t=e.split(";"),a={},l=0;l<t.length;l++){var i=t[l].split(":");a[i[0].replace(/\-/g,"")]=i[1]}tinymce.each(a,function(e,t){"brush"==t?c.language!=e&&(c.language=e):(e="true"==e?!0:"false"==e?!1:e,"highlight"==t&&(e=e.replace(/\[/g,"").replace(/\]/g,"")),c[t]=e)})}function a(t){var a=t.data.code;a=a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");var l=t.data.language?t.data.language:u;i=e.dom.create("pre",{"class":l,style:"display: block; padding: .769em; margin: 0 0 .769em; font-size: .929em; line-height: 1.428571429; color: #333333; word-break: break-all; word-wrap: break-word; background-color: #f5f5f5; border: 1px solid #cccccc; border-radius: .286em;"},a),g?e.dom.replace(i,d):e.insertContent(e.dom.getOuterHTML(i)+"<br>")}var l,i,n,o,r=(e.dom,e.selection),c={},s={},u="html",g=!1,d=r.getNode();s.autolinks=!0,s.collapse=!1,s.firstline="1",s.gutter=!0,s.highlight="",s.htmlscript=!1,s.tabsize="4",s.toolbar=!0,c.language="",c.autolinks=s.autolinks,c.collapse=s.collapse,c.firstline=s.firstline,c.gutter=s.gutter,c.highlight=s.highlight,c.htmlscript=s.htmlscript,c.tabsize=s.tabsize,c.toolbar=s.toolbar;var h=[{text:"Language",value:""},{text:"ActionScript3",value:"as3"},{text:"Bash/shell",value:"bash"},{text:"ColdFusion",value:"cf"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"CSS",value:"css"},{text:"Delphi",value:"delphi"},{text:"Diff",value:"diff"},{text:"Erlang",value:"erl"},{text:"Groovy",value:"groovy"},{text:"HTML",value:"html"},{text:"Java",value:"java"},{text:"JavaFX",value:"jfx"},{text:"JavaScript",value:"js"},{text:"Perl",value:"perl"},{text:"PHP",value:"php"},{text:"PowerShell",value:"ps"},{text:"Python",value:"py"},{text:"Ruby",value:"ruby"},{text:"Scala",value:"scala"},{text:"SQL",value:"sql"},{text:"Text",value:"plain"},{text:"Visual Basic",value:"vb"},{text:"XML",value:"xml"}];"pre"==d.nodeName.toLowerCase()&&-1!=d.className.indexOf("brush:")?(g=!0,n=$(d).html(),n=n.replace(/\&lt\;/gi,"<").replace(/\&gt\;/gi,">"),o=d.className,o=o.replace(/ /g,""),t(o)):(n=r.getContent({format:"text"}),c.autolinks=!1,c.toolbar=!1);for(var p=0;p<h.length;p++)h[p].value==c.language&&(h[p].selected=!0);c.code=n,"&nbsp;"==c.code&&(c.code=""),l=e.windowManager.open({title:"Code Editor",data:c,minWidth:450,body:[{name:"language",type:"listbox",values:h},{name:"code",type:"textbox",minHeight:200,multiline:!0}],onsubmit:a})}tinymce.DOM.loadCSS(t+"/style/style.css"),e.addButton("sh4tinymce",{icon:"sh4tinymce",tooltip:"Insert/Edit Code",onclick:a}),e.addMenuItem("sh4tinymce",{text:"SH4TinyMCE",icon:"sh4tinymce",context:"insert",onclick:a})});
